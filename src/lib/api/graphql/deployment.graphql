fragment DeploymentFragment on Deployment {
  id
  createdAt
  updatedAt
  name
  templateVars
}

query ListDeployments {
  deployments {
    deployments {
      ...DeploymentFragment
      blueprint {
        ...BlueprintFragement
      }
      requester {
        ...UserFragment
      }
    }
    total
  }
}

query GetDeployment($id: ID!) {
  deployment(id: $id) {
    ...DeploymentFragment
    blueprint {
      ...BlueprintFragement
    }
    requester {
      ...UserFragment
    }
    deploymentNodes {
      id
      createdAt
      updatedAt
      state
      vars

      resource {
        id
        createdAt
        updatedAt
        key
        object
      }

      nextNodes {
        id
      }
    }
  }
}

mutation UpdateDeployment($id: ID!, $input: DeploymentInput!) {
  updateDeployment(id: $id, input: $input) {
    ...DeploymentFragment
  }
}

mutation DestroyDeployment($id: ID!) {
  destroyDeployment(id: $id) {
    ...DeploymentFragment
  }
}

# mutation GetConsole($id: ID!, $hostKey: String!) {
#   getConsole(id: $id, hostKey: $hostKey)
# }
